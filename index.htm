<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æŠ•èƒæ¨¡æ“¬å™¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #222;
            --text-color: #eee;
            --accent-color: #888;
            --panel-bg: #333;
            --font-main: 'Noto Sans TC', sans-serif;
            --font-mono: 'Roboto Mono', monospace;
            --success: #48bb78;
            --danger: #f56565;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            transition: background-color 1s ease, color 1s ease;
            overflow-x: hidden;
        }

        /* Volume Control */
        #volume-control {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        #volume-control:hover { background: rgba(0,0,0,0.8); transform: scale(1.1); }
        .rich-theme #volume-control { background: rgba(255,255,255,0.5); color: #333; }

        /* Main Container */
        #game-container {
            width: 95%;
            max-width: 850px;
            min-height: 85vh;
            background-color: var(--panel-bg);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            position: relative;
            transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            overflow: hidden;
        }

        /* --- Animations --- */
        @keyframes fadeInSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes flashGreen { 0%, 100% { color: inherit; } 50% { color: var(--success); text-shadow: 0 0 10px var(--success); } }
        @keyframes flashRed { 0%, 100% { color: inherit; } 50% { color: var(--danger); text-shadow: 0 0 10px var(--danger); } }

        .animate-in { animation: fadeInSlideUp 0.6s ease forwards; }
        .flash-green { animation: flashGreen 0.8s ease; }
        .flash-red { animation: flashRed 0.8s ease; }


        /* =========================================
           THEME: RICH KID (Glassmorphism & Luxury)
           ========================================= */
        body.rich-theme {
            --bg-color: #eef2f7;
            --text-color: #2d3748;
            --accent-color: #3182ce;
            background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
        }
        
        body.rich-theme::before {
            content: ''; position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 60%);
            animation: moveLight 15s infinite linear; pointer-events: none; z-index: -1;
        }
        @keyframes moveLight { 0% { transform: translate(0,0); } 50% { transform: translate(50px, 50px); } 100% { transform: translate(0,0); } }
        
        .rich-theme #game-container {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.15), inset 0 0 20px rgba(255,255,255,0.5);
        }

        .rich-theme h1, .rich-theme h2 {
            color: #1a365d;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }

        .rich-theme .btn {
            background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
            position: relative; overflow: hidden;
            font-size: 0.95rem;
        }
        
        .rich-theme .btn::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(45deg) translate(-100%, -100%); transition: transform 0.6s;
        }
        .rich-theme .btn:hover::after { transform: rotate(45deg) translate(0, 0); }
        .rich-theme .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(79, 172, 254, 0.6); }


        /* =========================================
           THEME: POOR KID (Grunge & Dystopian)
           ========================================= */
        body.poor-theme {
            --bg-color: #0a0a0a;
            --text-color: #a8a8a8;
            --accent-color: #d69e2e;
            font-family: var(--font-mono);
            background-color: #000;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23222' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
        }
        
        body.poor-theme::after {
            content: ""; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%; pointer-events: none; z-index: 10;
            animation: flicker 0.15s infinite; opacity: 0.3;
        }
        @keyframes flicker { 0% { opacity: 0.27; } 50% { opacity: 0.33; } 100% { opacity: 0.27; } }

        .poor-theme #game-container {
            background-color: #1a1a1a;
            border: 3px solid #333;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.9), 0 0 20px rgba(0,0,0,0.8);
            border-radius: 4px;
            position: relative;
        }
        
        .poor-theme #game-container::before {
            content: ""; position: absolute; top:0; left:0; right:0; bottom:0; pointer-events: none;
            background: radial-gradient(circle at top left, transparent 0%, rgba(0,0,0,0.8) 100%); z-index: 1;
        }
        
        .poor-theme h1, .poor-theme h2 { color: #ccc; text-transform: uppercase; letter-spacing: 2px; }
        .poor-theme .event-description-box { border-left: 4px solid #d69e2e; background: rgba(214, 158, 46, 0.1); }

        .poor-theme .btn {
            background: #2a2a2a;
            border: 2px solid #444;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 2px;
            transition: all 0.1s;
            position: relative;
            font-size: 0.9rem;
        }
        .poor-theme .btn:hover {
            background: #d69e2e; color: #000; border-color: #d69e2e;
            box-shadow: 0 0 15px #d69e2e;
            text-shadow: -1px 0px 1px rgba(0,0,0,0.5);
        }
        .poor-theme .btn:hover::before {
            content: attr(data-text); position: absolute; left: -2px; text-shadow: 2px 0 #ff0000;
            top:0; color: #333; background: #d69e2e; overflow: hidden; clip: rect(0, 900px, 0, 0);
            animation: noise-anim 2s infinite linear alternate-reverse;
        }
        @keyframes noise-anim {
            0% { clip: rect(9px, 9999px, 3px, 0); } 50% { clip: rect(67px, 9999px, 24px, 0); } 100% { clip: rect(38px, 9999px, 92px, 0); }
        }


        /* =========================================
           Common UI Elements
           ========================================= */
        h1 { text-align: center; margin-bottom: 2.5rem; font-size: 2rem; }
        h2 { font-size: 1.5rem; margin-bottom: 1rem; }
        p { line-height: 1.7; margin-bottom: 1.2rem; font-size: 1.05rem; }
        
        .content-layer { position: relative; z-index: 2; height: 100%; display: flex; flex-direction: column; }

        .stats-bar {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 25px; padding: 15px;
            background: rgba(0,0,0,0.05); border-radius: 10px;
            font-weight: 600; font-size: 0.95rem;
        }
        .rich-theme .stats-bar { background: rgba(255,255,255,0.5); box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); }
        .poor-theme .stats-bar { background: rgba(0,0,0,0.3); border: 1px solid #333; color: #d69e2e; font-family: var(--font-mono); }

        .stat-item { display: flex; flex-direction: column; align-items: center; }
        .stat-label { font-size: 0.75rem; opacity: 0.7; margin-bottom: 4px; text-transform: uppercase; }
        .stat-value { font-size: 1.1rem; }

        .event-box { flex-grow: 1; display: flex; flex-direction: column; }
        .event-description-box {
            padding: 20px; background: rgba(0,0,0,0.03);
            border-radius: 8px; margin: 15px 0 25px 0;
        }
        .rich-theme .event-description-box { background: rgba(255,255,255,0.4); border-left: 4px solid var(--accent-color); }

        .choices-box { display: grid; gap: 15px; }
        .rich-theme .choices-box { grid-template-columns: repeat(2, 1fr); }
        .poor-theme .choices-box { grid-template-columns: 1fr; }

        .btn {
            padding: 15px 20px; cursor: pointer;
            transition: all 0.3s ease; font-family: inherit; outline: none;
            display: flex; justify-content: center; align-items: center; text-align: center;
        }
        .btn:active { transform: scale(0.97) !important; }
        
        .log-box {
            margin-top: auto;
            padding-top: 15px;
            font-size: 0.85rem; opacity: 0.8;
            border-top: 1px solid rgba(0,0,0,0.1);
            max-height: 120px; overflow-y: auto;
            font-family: var(--font-mono);
        }
        .rich-theme .log-box { border-top-color: rgba(255,255,255,0.3); color: #555; }
        .poor-theme .log-box { border-top-color: #333; color: #777; }

        .hidden { display: none !important; }

        /* Start Screen Cards */
        .start-cards { display: flex; gap: 20px; margin-top: 30px; }
        @media (max-width: 768px) { .start-cards { flex-direction: column; } }

        .card {
            flex: 1; padding: 30px 20px;
            border-radius: 15px; cursor: pointer;
            text-align: center; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; justify-content: center;
        }
        .card:hover { transform: translateY(-10px) scale(1.02); z-index: 10; }
        .card h3 { margin: 0 0 15px 0; font-size: 1.4rem; }
        .card p { margin: 5px 0; font-size: 0.95rem; }
        
        .card-rich {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #234e52; box-shadow: 0 10px 20px rgba(168, 237, 234, 0.3);
        }
        .card-rich::before { content: 'ğŸ’'; font-size: 6rem; position: absolute; top: -20px; right: -20px; opacity: 0.1; transform: rotate(15deg); }

        .card-poor {
            background: linear-gradient(135deg, #232526 0%, #414345 100%);
            color: #a0aec0; box-shadow: 0 10px 20px rgba(0,0,0,0.5); border: 1px solid #444;
        }
        .card-poor::before { content: 'â›“ï¸'; font-size: 6rem; position: absolute; top: -20px; right: -20px; opacity: 0.1; transform: rotate(15deg); filter: grayscale(1); }

        .card-middle {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: #2c3e50;
            box-shadow: 0 10px 20px rgba(132, 250, 176, 0.3);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .card-middle::before {
            content: 'ğŸ '; font-size: 6rem; position: absolute; top: -20px; right: -20px; opacity: 0.1; transform: rotate(15deg);
        }

        #end-message { font-size: 1.1rem; }
        .rich-theme #end-message strong { color: #3182ce; }
        .poor-theme #end-message strong { color: #e53e3e; text-decoration: underline; }

        .global-stats-container {
            margin-top: 40px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            color: #aaa;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }
        .stats-col strong { display: block; margin-bottom: 5px; color: #fff; }
        .stats-rich { color: #90cdf4; }
        .stats-poor { color: #e53e3e; }
        .reset-btn {
            background: transparent; border: 1px solid #444; color: #666;
            margin-top: 15px; font-size: 0.7rem; padding: 5px 10px; cursor: pointer;
            border-radius: 4px;
        }
        .reset-btn:hover { color: #999; border-color: #666; }

    </style>
</head>
<body>

<div id="volume-control" onclick="sound.toggleMute()">ğŸ”Š</div>

<div id="game-container">
    <div class="content-layer">
        <div id="start-screen" class="animate-in">
            <h1>æŠ•èƒæ¨¡æ“¬å™¨</h1>
            <p style="text-align: center; font-size: 1.1rem; opacity: 0.8;">å‘½é‹çš„åˆ†æ­§é»ï¼Œè«‹é¸æ“‡ä½ çš„èµ·é»...</p>
            <div class="start-cards">
                <div class="card card-rich" onclick="startGame(true)">
                    <h3>å«è‘—é‡‘æ¹¯åŒ™</h3>
                    <p>è³‡é‡‘ï¼š$5,000,000</p>
                    <p>ç‹€æ…‹ï¼šå®¶æ—ç„¡é™é‡‘æ´</p>
                </div>
                
                <div class="card card-middle" onclick="triggerMiddleEnding()">
                    <h3>å°åº·å®¶åº­</h3>
                    <p>è³‡é‡‘ï¼š$500,000</p>
                    <p>ç‹€æ…‹ï¼š30å¹´é«˜é¡æˆ¿è²¸</p>
                </div>

                <div class="card card-poor" onclick="startGame(false)">
                    <h3>å®¶å¾’å››å£</h3>
                    <p>è³‡é‡‘ï¼š$0 (è² å‚µ)</p>
                    <p>ç‹€æ…‹ï¼šæ¥µé™ç”Ÿå­˜æ¨¡å¼</p>
                </div>
            </div>

            <div class="global-stats-container">
                <div style="text-align:center; letter-spacing:1px; margin-bottom:5px;">ğŸ“Š è¼ªè¿´ç´€éŒ„å™¨ (Local Record)</div>
                <div class="stats-grid">
                    <div class="stats-col" style="border-right: 1px solid rgba(255,255,255,0.1);">
                        <strong class="stats-rich">å¯ŒäºŒä»£æ¨¡å¼</strong>
                        <div>æŠ•èƒæ¬¡æ•¸ï¼š<span id="stat-rich-plays">0</span></div>
                        <div>æˆåŠŸçµå±€ï¼š<span id="stat-rich-wins">0</span></div>
                        <div>æˆåŠŸç‡ï¼š<span id="stat-rich-rate">0%</span></div>
                    </div>
                    <div class="stats-col">
                        <strong class="stats-poor">è²§å›°æ¨¡å¼</strong>
                        <div>æŠ•èƒæ¬¡æ•¸ï¼š<span id="stat-poor-plays">0</span></div>
                        <div>éšç´šç¿»è½‰ï¼š<span id="stat-poor-wins">0</span></div>
                        <div>ç¿»è½‰ç‡ï¼š<span id="stat-poor-rate">0%</span></div>
                    </div>
                </div>
                <div style="text-align:center;">
                    <button class="reset-btn" onclick="resetGlobalStats()">é‡ç½®ç´€éŒ„</button>
                </div>
            </div>

            <p style="margin-top:20px; font-size: 0.8rem; text-align: center; opacity: 0.5; font-family: var(--font-mono);">*è­¦å‘Šï¼šæœ¬éŠæˆ²æ¥µåº¦ç¾å¯¦ï¼Œçª®äººæ¨¡å¼å¯èƒ½æœƒå°è‡´èº«å¿ƒä¸é©ï¼Œä¸€åˆ‡å…§å®¹çš†ç‚ºè™›æ§‹ï¼Œå¥½ç©å°±å¥½ã€‚</p>
        </div>

        <div id="game-screen" class="hidden">
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">å¹´é½¡</span>
                    <span class="stat-value" id="stat-age">5 æ­²</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è³‡ç”¢</span>
                    <span class="stat-value" id="stat-money">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">éšç´š</span>
                    <span class="stat-value" id="stat-status">åº•å±¤</span>
                </div>
            </div>
            
            <div id="event-container" class="event-box">
                <div id="event-display"></div>
                <div id="choices-display" class="choices-box"></div>
            </div>

            <div class="log-box" id="game-log"></div>
        </div>

        <div id="end-screen" class="hidden">
            <h1>äººç”Ÿçµç®—</h1>
            <div id="end-message" style="margin-bottom: 40px; line-height: 1.8;"></div>
            <button class="btn" onclick="location.reload()" style="width:100%" data-text="é‡æ–°æŠ•èƒ">é‡æ–°æŠ•èƒ</button>
        </div>
    </div>
</div>

<script>
    /* =========================================
       SOUND MANAGER (SFX Only - No Voice)
       ä½¿ç”¨ç€è¦½å™¨å…§å»º Web Audio API
       ========================================= */
    class SoundManager {
        constructor() {
            this.muted = false;
            this.audioCtx = null;
        }

        init() {
            if (!this.audioCtx) {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                this.audioCtx = new AudioContext();
            }
        }

        toggleMute() {
            this.muted = !this.muted;
            const btn = document.getElementById('volume-control');
            btn.innerText = this.muted ? 'ğŸ”‡' : 'ğŸ”Š';
            btn.style.opacity = this.muted ? 0.5 : 1;
        }

        // ç”¢ç”ŸåˆæˆéŸ³æ•ˆ (Beep/Buzz)
        playTone(type, isRich) {
            if (this.muted || !this.audioCtx) return;
            if (this.audioCtx.state === 'suspended') this.audioCtx.resume();

            const osc = this.audioCtx.createOscillator();
            const gainNode = this.audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(this.audioCtx.destination);

            const now = this.audioCtx.currentTime;

            if (type === 'click') {
                // UI Click
                if (isRich) {
                    osc.type = 'sine'; // æ¸…è„†
                    osc.frequency.setValueAtTime(800, now);
                    osc.frequency.exponentialRampToValueAtTime(1200, now + 0.1);
                    gainNode.gain.setValueAtTime(0.1, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(now); osc.stop(now + 0.1);
                } else {
                    osc.type = 'square'; // ç²—ç³™
                    osc.frequency.setValueAtTime(150, now);
                    gainNode.gain.setValueAtTime(0.1, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(now); osc.stop(now + 0.1);
                }
            } else if (type === 'good') {
                // Success / Money
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(600, now);
                osc.frequency.setValueAtTime(800, now + 0.1);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            } else if (type === 'bad') {
                // Fail / Lose Money
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.3);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now); osc.stop(now + 0.3);
            } else if (type === 'start') {
                // Game Start Sound
                osc.type = isRich ? 'sine' : 'sawtooth';
                osc.frequency.setValueAtTime(isRich ? 440 : 100, now);
                osc.frequency.exponentialRampToValueAtTime(isRich ? 880 : 50, now + 1);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.linearRampToValueAtTime(0, now + 1);
                osc.start(now); osc.stop(now + 1);
            }
        }
    }

    const sound = new SoundManager();

    // ==========================================
    // GAME LOGIC
    // ==========================================

    let state = { isRich: false, age: 5, money: 0, socialScore: 0, history: [] };
    
    // --- GLOBAL STATS LOGIC ---
    let globalStats = JSON.parse(localStorage.getItem('reincarnation_stats')) || {
        richPlay: 0, richWin: 0,
        poorPlay: 0, poorWin: 0
    };

    function saveStats() {
        localStorage.setItem('reincarnation_stats', JSON.stringify(globalStats));
        updateStatsDisplay();
    }

    function resetGlobalStats() {
        if(confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è¼ªè¿´æ•¸æ“šå—ï¼Ÿ')) {
            globalStats = { richPlay: 0, richWin: 0, poorPlay: 0, poorWin: 0 };
            saveStats();
        }
    }

    function updateStatsDisplay() {
        document.getElementById('stat-rich-plays').innerText = globalStats.richPlay;
        document.getElementById('stat-rich-wins').innerText = globalStats.richWin;
        let rRate = globalStats.richPlay === 0 ? 0 : Math.round((globalStats.richWin / globalStats.richPlay) * 100);
        document.getElementById('stat-rich-rate').innerText = rRate + "%";

        document.getElementById('stat-poor-plays').innerText = globalStats.poorPlay;
        document.getElementById('stat-poor-wins').innerText = globalStats.poorWin;
        let pRate = globalStats.poorPlay === 0 ? 0 : Math.round((globalStats.poorWin / globalStats.poorPlay) * 100);
        document.getElementById('stat-poor-rate').innerText = pRate + "%";
    }

    // Initialize display on load
    updateStatsDisplay();

    const CONFIG = {
        rich: { startMoney: 5000000, moneyMultiplier: 5, baseLuck: 0.8 },
        poor: { startMoney: 0, moneyMultiplier: 0.8, baseLuck: 0.15 }
    };

    const EVENTS = [
        {
            age: 5, title: "ç«¥å¹´çš„ç©å…·", description: "5æ­²äº†ï¼Œä½ çœ‹è‘—æ«¥çª—è£¡çš„æœ€æ–°æ¬¾æ©Ÿå™¨äººï¼Œéå¸¸æƒ³è¦ã€‚",
            richDesc: "é€™é»å°éŒ¢å°å®¶è£¡æ ¹æœ¬ä¸æ˜¯éŒ¢ã€‚",
            poorDesc: "å®¶è£¡é€£è²·èœéŒ¢éƒ½è¦æ–¤æ–¤è¨ˆè¼ƒã€‚",
            richOptions: [
                { text: "è²·é™é‡å…¨å¥—", result: { msg: "é€éç©æ¨¡å‹å­¸æœƒäº†æ©Ÿæ¢°æ§‹é€ ã€‚", score: 5, money: -1000 } },
                { text: "è«‹å®¶æ•™é™ªç©", result: { msg: "åœ¨éŠæˆ²ä¸­é–‹ç™¼äº†é«˜æ™ºå•†ã€‚", score: 8, money: -5000 } },
                { text: "å‡ºåœ‹å»è¿ªå£«å°¼", result: { msg: "é–‹é—Šäº†çœ¼ç•Œï¼Œå¾å°å°±ç¿’æ…£è‹±èªç’°å¢ƒã€‚", score: 10, money: -50000 } }
            ],
            poorOptions: [
                { text: "å“­é¬§è‘—è¦è²·", result: { msg: "è¢«ç½µäº†ä¸€é “ï¼Œæœ€å¾Œç©è·¯é‚Šçš„æ¨¹æã€‚", score: -1, money: 0 } },
                { text: "é»˜é»˜èµ°é–‹", result: { msg: "å­¸æœƒäº†å£“æŠ‘è‡ªå·±çš„æ…¾æœ›ã€‚", score: 0, money: 0 } }
            ]
        },
        {
            age: 7, title: "æ‰è—èˆˆè¶£ç­", description: "ç­ä¸Šçš„åŒå­¸éƒ½åœ¨å­¸æ‰è—ï¼Œä½ ä¹Ÿæƒ³å­¸é»ä»€éº¼ã€‚",
            richDesc: "åª½åª½æ‹¿äº†ä¸€ç–Šç°¡ç« çµ¦ä½ é¸ï¼Œå•ä½ æƒ³å­¸é‹¼ç´é‚„æ˜¯é«˜çˆ¾å¤«ã€‚",
            poorDesc: "ä½ çœ‹è‘—å‚³å–®ä¸Šçš„å­¸è²»ï¼Œæ¯”çˆ¸çˆ¸ä¸€å€‹æœˆçš„è–ªæ°´é‚„å¤šã€‚",
            richOptions: [
                { text: "å­¸é‹¼ç´å°æç´", result: { msg: "åŸ¹é¤Šäº†å„ªé›…çš„æ°£è³ªèˆ‡éŸ³æ„Ÿã€‚", score: 8, money: -10000 } },
                { text: "å­¸é¦¬è¡“é«˜çˆ¾å¤«", result: { msg: "çµè­˜äº†å…¶ä»–æ¬Šè²´å®¶åº­çš„å°å­©ã€‚", score: 12, money: -50000 } },
                { text: "è«‹å¤–æ•™ä¸€å°ä¸€", result: { msg: "èªè¨€èƒ½åŠ›çªé£›çŒ›é€²ã€‚", score: 10, money: -20000 } },
                { text: "å…¨éƒ¨éƒ½å­¸", result: { msg: "é›–ç„¶å¾ˆç´¯ï¼Œä½†ä½ æˆç‚ºäº†å…¨èƒ½å¤©æ‰ã€‚", score: 15, money: -80000 } }
            ],
            poorOptions: [
                { text: "å¹«å¿™åšå®¶åº­ä»£å·¥", result: { msg: "æ‰‹æŒ‡ç ´çš®ï¼Œä¸Šèª²æ‰“çŒç¡ï¼Œä½†è³ºäº†åˆé¤è²»ã€‚", score: -2, money: 100 } },
                { text: "å»åœ–æ›¸é¤¨çœ‹æ›¸", result: { msg: "é€™æ˜¯å”¯ä¸€å…è²»çš„è³‡æºã€‚ä½ æ¯”åŒé½¡äººæ—©ç†Ÿã€‚", score: 3, money: 0 } }
            ]
        },
        {
            age: 10, title: "å°å­¸è‹±æ–‡æœŸä¸­è€ƒ", description: "ç¬¬ä¸€æ¬¡æ­£å¼çš„è‹±æ–‡è€ƒè©¦ã€‚",
            richDesc: "å¾å°é›™èªå¹¼å…’åœ’ï¼ŒåŠ ä¸Šæ¯å¹´çš„æµ·å¤–å¤ä»¤ç‡Ÿã€‚",
            poorDesc: "å­¸æ ¡è€å¸«æ•™å¾—éš¨ä¾¿ï¼Œå®¶è£¡ä¹Ÿæ²’äººçœ‹å¾—æ‡‚è‹±æ–‡ã€‚",
            richOptions: [
                { text: "è¼•é¬†æ‡‰è€ƒ", specialType: "exam" },
                { text: "è«‹å®¶æ•™è€ƒå‰è¡åˆº", specialType: "exam_boost" } 
            ],
            poorOptions: [
                { text: "æ­»è¨˜ç¡¬èƒŒ", specialType: "exam" }
            ]
        },
        {
            age: 13, title: "å…¨åœ‹ç§‘å­¸å‰µæ„å¤§è³½", description: "å­¸æ ¡è¦æ±‚æ¯å€‹äººéƒ½è¦åƒåŠ ç§‘å­¸å±•è¦½ï¼Œé€™é—œä¹åˆ°å‡å­¸çš„å‚™å¯©è³‡æ–™ã€‚",
            richDesc: "çˆ¸çˆ¸çœ‹äº†ä¸€çœ¼é¡Œç›®ï¼Œç›´æ¥å«å…¬å¸ç ”ç™¼éƒ¨çš„é¦–å¸­å·¥ç¨‹å¸«å¹«ä½ å¼„äº†ä¸€å€‹ã€AI è¦–è¦ºè¾¨è­˜ç„¡äººæ©Ÿã€ã€‚",
            poorDesc: "ä½ æƒ³åšä¸€å€‹è‡ªå‹•é¤µé£Ÿå™¨ï¼Œä½†å»é›»å­ææ–™è¡Œå•äº†åƒ¹éŒ¢ï¼Œç™¼ç¾é¦¬é”å’Œæ™¶ç‰‡è¦èŠ±æ‰ä½ åŠå¹´çš„é›¶ç”¨éŒ¢ã€‚",
            richOptions: [
                { text: "ç›´æ¥æ‹¿ç ”ç™¼éƒ¨çš„æˆå“", result: { msg: "é€™æ ¹æœ¬æ˜¯é™ç¶­æ‰“æ“Šã€‚è©•å¯©é©šå˜†æ–¼ä½ çš„ã€å¤©æ‰ã€ï¼Œä½ è¼•é¬†æ‹¿ä¸‹å…¨åœ‹é‡‘ç‰Œã€‚", score: 15, money: 0 } },
                { text: "è«‹å¤§å­¸æ•™æˆæ›åæŒ‡å°", result: { msg: "é›–ç„¶ä½œå“æ˜¯æ•™æˆåšçš„ï¼Œä½†ä½ å­¸æœƒäº†æ€éº¼å¯«æ¼‚äº®çš„å ±å‘Šã€‚ç²å¾—ç‰¹å„ªã€‚", score: 12, money: -50000 } },
                { text: "è³¼è²·é ‚ç´šå¯¦é©—è¨­å‚™", result: { msg: "è¨­å‚™å¤ªé«˜ç´šï¼Œä½ éš¨ä¾¿å¼„å¼„æ•¸æ“šéƒ½å¾ˆæ¼‚äº®ã€‚ç²å¾—å„ªç­‰ã€‚", score: 10, money: -30000 } }
            ],
            poorOptions: [
                { text: "ç”¨å›æ”¶ææ–™ç¡¬åš", result: { chance: 0.05, success: "è©•å¯©è¢«ä½ çš„å‰µæ„æ„Ÿå‹•ï¼Œçµ¦äº†ä½³ä½œï¼ˆä½†é€™ç¨®æ©Ÿç‡æ¥µä½ï¼‰ã€‚", fail: "ä½ çš„ç´™ç®±æ©Ÿå™¨äººåœ¨å±•ç¤ºæ™‚å®æ‰äº†ï¼Œæ—é‚Šå¯Œå®¶å­å¼Ÿçš„ç„¡äººæ©Ÿæ­£åœ¨ç·¨éšŠé£›è¡Œã€‚ä½ æ„Ÿåˆ°ç„¡åœ°è‡ªå®¹ã€‚", score: -5, money: -500 } },
                { text: "éš¨ä¾¿åšå€‹éœæ…‹æµ·å ±", result: { msg: "åæ­£ä¹Ÿä¸æœƒå¾—çï¼Œä¸å¦‚çœä¸‹è²·ææ–™çš„éŒ¢ã€‚", score: -2, money: 0 } }
            ]
        },
        {
            age: 15, title: "é’æ˜¥æœŸçš„å¤–è²Œ", description: "åˆ°äº†æ„›æ¼‚äº®çš„å¹´ç´€ï¼Œä½ çš„ç‰™é½’æœ‰é»äº‚ï¼Œè‡‰ä¸Šæœ‰ç—˜ç—˜ã€‚",
            richDesc: "å¤–è¡¨æ˜¯ç¤¾æœƒç«¶çˆ­åŠ›çš„ä¸€ç’°ï¼Œçˆ¶æ¯å¾ˆé‡è¦–ã€‚",
            poorDesc: "çœ‹ç‰™é†«æ˜¯å¤©æ–‡æ•¸å­—ï¼Œç—˜ç—˜è¢«èªç‚ºæ˜¯ã€é•·å¤§å°±æœƒå¥½ã€ã€‚",
            richOptions: [
                { text: "é ‚ç´šéš±é©ç¾çŸ¯æ­£", result: { msg: "ç¬‘å®¹å®Œç¾ï¼Œè‡ªä¿¡çˆ†æ£šã€‚", score: 10, money: -20000 } },
                { text: "å®šæœŸé†«ç¾è­·è†š", result: { msg: "çš®è†šå…‰æ»‘ï¼Œæˆç‚ºæ ¡åœ’ç”·ç¥/å¥³ç¥ã€‚", score: 8, money: -10000 } },
                { text: "è«‹é€ å‹å¸«æ­é…", result: { msg: "å“å‘³å‡ºçœ¾ï¼Œå—äººè¿½æ§ã€‚", score: 8, money: -15000 } }
            ],
            poorOptions: [
                { text: "æ”¾ä»»ä¸ç®¡", result: { msg: "è¢«åŒå­¸å–ç¬‘ï¼Œè®Šå¾—è‡ªå‘ä¸æ•¢ç¤¾äº¤ã€‚", score: -5, money: 0 } },
                { text: "ç”¨åæ–¹æ´—è‡‰", result: { msg: "çš®è†šéæ•çˆ›è‡‰ï¼Œæƒ…æ³æ›´ç³Ÿäº†ã€‚", score: -8, money: -500 } }
            ]
        },
        {
            age: 18, title: "å¤§å­¸å…¥å­¸æ¸¬é©—", description: "æ±ºå®šäººç”Ÿæœªä¾†çš„é—œéµæ™‚åˆ»ã€‚",
            richDesc: "æ¢æ¢å¤§è·¯é€šç¾…é¦¬ï¼Œé€™åªæ˜¯å…¶ä¸­ä¸€æ¢è·¯ã€‚",
            poorDesc: "é€™æ˜¯ä½ å”¯ä¸€ç¿»èº«çš„æ©Ÿæœƒï¼Œå¤±æ•—äº†å°±å¾—å»å·¥å» ã€‚",
            richOptions: [
                { text: "ç”³è«‹åœ‹å¤–åæ ¡", result: { msg: "é è‘—æ¼‚äº®çš„å±¥æ­·èˆ‡ææ¬¾ï¼Œé€²å…¥å¸¸æ˜¥è—¤ã€‚", score: 25, money: -2000000 } },
                { text: "åœ‹å…§é ‚å¤§(æ¨ç”„)", result: { msg: "é è‘—ç«¶è³½åŠ åˆ†èˆ‡äººè„ˆè¼•é¬†éŒ„å–ã€‚", score: 20, money: -50000 } },
                { text: "ç¹¼æ‰¿å®¶æ¥­(ä¸è®€äº†)", result: { msg: "ç›´æ¥é€²å…¥å…¬å¸è‘£äº‹æœƒå¯¦ç¿’ã€‚", score: 15, money: 100000 } },
                { text: "Gap Year ç’°éŠä¸–ç•Œ", result: { msg: "å°‹æ‰¾è‡ªæˆ‘ï¼Œé«”é©—äººç”Ÿã€‚", score: 10, money: -500000 } }
            ],
            poorOptions: [
                { text: "æ‹¼å‘½è‹¦è®€è€ƒåœ‹ç«‹", result: { chance: 0.1, success: "å¥‡è¹Ÿç™¼ç”Ÿï¼è€ƒä¸Šäº†åœ‹ç«‹å¤§å­¸ï¼Œä½†å­¸è²¸æ²‰é‡ã€‚", fail: "è½æ¦œäº†ã€‚åªèƒ½å»è®€å­¸åº—ã€‚", score: 5, money: -50000 } },
                { text: "ç›´æ¥å°±æ¥­", result: { msg: "å»å·¥å» è¼ªç­ï¼Œæ”¾æ£„å‡å­¸ã€‚", score: -5, money: 5000 } }
            ]
        },
        {
            age: 22, title: "ç•¢æ¥­å¾Œçš„é¸æ“‡", description: "å¤§å­¸ç•¢æ¥­äº†ï¼Œç«™åœ¨äººç”Ÿçš„åå­—è·¯å£ã€‚",
            richDesc: "ä¸ç”¨æ€¥è‘—è³ºéŒ¢ï¼Œé‡é»æ˜¯ç´¯ç©è³‡æ­·èˆ‡äººè„ˆã€‚",
            poorDesc: "å­¸è²¸å‚¬ç¹³ä¿¡ä¾†äº†ï¼Œæˆ¿ç§Ÿä¹Ÿè¦ç¹³äº†ã€‚",
            richOptions: [
                { text: "å»å¤§ä¼æ¥­åˆ·å±¥æ­·", result: { msg: "é å”å”çš„é—œä¿‚é€²äº†å¤–å•†ã€‚", score: 15, money: 60000 } },
                { text: "æ‹¿éŒ¢å‰µæ¥­", result: { msg: "å¤±æ•—äº†ä¹Ÿæ²’é—œä¿‚ï¼Œç´¯ç©ç¶“é©—ã€‚", score: 20, money: -200000 } },
                { text: "ç¹¼çºŒè®€ç¢©åš", result: { msg: "å­¸æ­·éé‡‘ï¼Œèµ·è–ªä¸‰ç´šè·³ã€‚", score: 15, money: -500000 } }
            ],
            poorOptions: [
                { text: "éš¨ä¾¿æ‰¾ä»½å·¥ä½œ", result: { msg: "èµ·è–ª28Kï¼Œè²¬ä»»åˆ¶ä¸çµ¦åŠ ç­è²»ã€‚", score: 0, money: 28000 } },
                { text: "è€ƒå…¬å‹™å“¡(å…¨è·è€ƒç”Ÿ)", result: { chance: 0.05, success: "è€ƒäº†ä¸‰å¹´çµ‚æ–¼ä¸Šæ¦œï¼Œéµé£¯ç¢—ã€‚", fail: "è½æ¦œå¤šæ¬¡ï¼Œè®Šæˆå®¶è£¡è¹²ã€‚", score: 5, money: -30000 } }
            ]
        },
        {
            age: 28, title: "æŠ•è³‡èˆ‡ç†è²¡", description: "èº«é‚Šçš„äººéƒ½åœ¨è¨è«–è‚¡å¸‚èˆ‡æˆ¿åœ°ç”¢ã€‚",
            richDesc: "æœ‰å°ˆå±¬çš„ç†è²¡é¡§å•ï¼Œé‚„æœ‰å…§ç·šæ¶ˆæ¯ã€‚",
            poorDesc: "æœ¬é‡‘å¤ªå°‘ï¼Œæ‰‹çºŒè²»éƒ½ä¸å¤ æ‰£ã€‚",
            richOptions: [
                { text: "å…§ç·šäº¤æ˜“/ç§å‹ŸåŸºé‡‘", result: { msg: "è³‡ç”¢ç¿»å€ï¼Œé›–ç„¶æœ‰é»ç°è‰²åœ°å¸¶ã€‚", score: 20, money: 5000000 } },
                { text: "æŠ•è³‡æˆ¿åœ°ç”¢", result: { msg: "è²·æˆ¿æ”¶ç§Ÿï¼Œèººè‘—è³ºã€‚", score: 15, money: 2000000 } },
                { text: "å¤©ä½¿æŠ•è³‡æ–°å‰µ", result: { chance: 0.8, success: "å£“å°å¯¶äº†ï¼Œç™¾å€å›æ”¶ã€‚", fail: "æ–°å‰µå€’é–‰ï¼Œä½†é€™é»éŒ¢ç„¡æ‰€è¬‚ã€‚", score: 25, money: 10000000 } }
            ],
            poorOptions: [
                { text: "ç©é«˜æ§“æ¡¿åˆç´„", result: { chance: 0.05, success: "é‹æ°£çˆ†æ£šï¼Œè³ºäº†ä¸€å¹´è–ªæ°´ã€‚", fail: "çˆ†å€‰äº†ï¼Œç©è“„æ­¸é›¶ã€‚", score: -10, money: -100000 } },
                { text: "å®šå­˜", result: { msg: "åˆ©æ¯è¶•ä¸ä¸Šé€šè†¨ï¼Œè¶Šå­˜è¶Šçª®ã€‚", score: -2, money: 1000 } }
            ]
        },
        {
            age: 35, title: "æˆå®¶ç«‹æ¥­", description: "çµå©šéœ€è¦å©šæˆ¿ï¼Œå­©å­éœ€è¦å­¸å€ã€‚",
            richDesc: "é€™ä¸æ˜¯å•é¡Œï¼Œå•é¡Œæ˜¯é¸å“ªä¸€å€ã€‚",
            poorDesc: "æ²’æˆ¿æ²’è»Šï¼Œç”šè‡³ä¸æ•¢çµå©šã€‚",
            richOptions: [
                { text: "å¸‚ä¸­å¿ƒè±ªå®…", result: { msg: "é›™æ–¹çˆ¶æ¯å‡ºè³‡ï¼Œç”Ÿæ´»å“è³ªæ¥µä½³ã€‚", score: 25, money: -2000000 } },
                { text: "ç§»æ°‘åœ‹å¤–", result: { msg: "ç‚ºäº†å­©å­çš„æ•™è‚²ç§»æ°‘ï¼Œè³‡ç”¢è½‰ç§»ã€‚", score: 20, money: -5000000 } },
                { text: "å®¶æ—è¯å§»", result: { msg: "å¼·å¼·è¯æ‰‹ï¼Œè³‡ç”¢åˆä½µã€‚", score: 30, money: 10000000 } }
            ],
            poorOptions: [
                { text: "ç§Ÿæˆ¿çµå©š", result: { msg: "æˆ¿æ±å¹´å¹´æ¼²ç§Ÿï¼Œå¸¸å¸¸æ¬å®¶ï¼Œä¸æ•¢ç”Ÿå°å­©ã€‚", score: -5, money: -10000 } },
                { text: "è²·åé è€å±‹", result: { chance: 0.1, success: "çµ‚æ–¼æœ‰å®¶äº†ï¼Œä½†é€šå‹¤è¦å…©å°æ™‚ã€‚", fail: "èƒŒæˆ¿è²¸èƒŒåˆ°æ‡·ç–‘äººç”Ÿï¼Œç”Ÿæ´»å“è³ªæ­¸é›¶ã€‚", score: 0, money: -30000 } }
            ]
        },
        {
            age: 45, title: "ä¸­å¹´å±æ©Ÿ", description: "é«”åŠ›ä¸‹é™ï¼Œå…¬å¸é–‹å§‹è£å“¡ã€‚",
            richDesc: "ä½ æ˜¯è€é—†/è‚¡æ±ï¼Œè£å“¡æ˜¯ä½ æ±ºå®šçš„ã€‚",
            poorDesc: "ä½ æ˜¯æœ€å®¹æ˜“è¢«é–‹åˆ€çš„é«˜é½¡åŸºå±¤å“¡å·¥ã€‚",
            richOptions: [
                { text: "è£å“¡ç¸®æ¸›æˆæœ¬", result: { msg: "å…¬å¸è‚¡åƒ¹ä¸Šæ¼²ï¼Œåˆ†ç´…å¢åŠ ã€‚", score: 10, money: 3000000 } },
                { text: "è½‰ä»»æ¦®è­½é¡§å•", result: { msg: "ä¸ç”¨åšäº‹ä¹Ÿæœ‰éŒ¢æ‹¿ã€‚", score: 15, money: 1000000 } },
                { text: "é€€ä¼‘äº«å—ç”Ÿæ´»", result: { msg: "åæ­£éŒ¢èŠ±ä¸å®Œã€‚", score: 20, money: 0 } }
            ],
            poorOptions: [
                { text: "è·ªæ±‚ä¸è£å“¡", result: { chance: 0.2, success: "ç•™ä¸‹ä¾†äº†ï¼Œä½†è¢«æ¸›è–ªä¸”å·¥ä½œåŠ å€ã€‚", fail: "é‚„æ˜¯è¢«è³‡é£äº†ï¼Œä¸­å¹´å¤±æ¥­ã€‚", score: -20, money: -50000 } },
                { text: "è·‘å¤–é€/é–‹Uber", result: { msg: "ç”¨æ™‚é–“æ›é‡‘éŒ¢ï¼Œèº«é«”å¿«é€Ÿå®æ‰ã€‚", score: -10, money: 30000 } }
            ]
        },
        {
            age: 55, title: "é‡å¤§ç–¾ç—…", description: "èº«é«”æª¢æŸ¥ç™¼ç¾äº†è…«ç˜¤ã€‚",
            richDesc: "åªè¦èƒ½ç”¨éŒ¢è§£æ±ºçš„ï¼Œéƒ½ä¸æ˜¯çµ•ç—‡ã€‚",
            poorDesc: "ä¸€å ´å¤§ç—…ï¼Œå°±èƒ½è®“å…¨å®¶å›åˆ°è²§çª®ç·šä»¥ä¸‹ã€‚",
            richOptions: [
                { text: "èµ´ç¾é ‚ç´šæ²»ç™‚", result: { msg: "æœ€æ–°çš„æ¨™é¶è—¥ç‰©ï¼Œå‰¯ä½œç”¨å°ï¼Œå®Œå…¨åº·å¾©ã€‚", score: 10, money: -2000000 } },
                { text: "ç§äººé†«ç™‚åœ˜éšŠ", result: { msg: "24å°æ™‚ç…§è­·ï¼Œç”Ÿæ´»å“è³ªä¸å—å½±éŸ¿ã€‚", score: 10, money: -1000000 } },
                { text: "æ›å™¨å®˜/å¹¹ç´°èƒ", result: { msg: "é€éç®¡é“å„ªå…ˆç²å¾—è³‡æºï¼Œé‡ç²æ–°ç”Ÿã€‚", score: 15, money: -3000000 } }
            ],
            poorOptions: [
                { text: "æ’å¥ä¿ç—…æˆ¿", result: { chance: 0.3, success: "ç­‰äº†å¾ˆä¹…çµ‚æ–¼æ’åˆ°ï¼Œå‹‰å¼·æ§åˆ¶ç—…æƒ…ã€‚", fail: "ç­‰åˆ°ç—…æƒ…æƒ¡åŒ–éƒ½é‚„æ²’æ’åˆ°...", score: -20, money: -20000 } },
                { text: "æ”¾æ£„æ²»ç™‚", result: { msg: "ä¸æƒ³æ‹–ç´¯å®¶äººï¼Œé¸æ“‡å›å®¶ç™‚é¤Šã€‚", score: -30, money: 0 } }
            ]
        },
        {
            age: 70, title: "å­å¥³çš„æˆå°±", description: "çœ‹è‘—ä¸‹ä¸€ä»£ï¼Œä½ è¦ºå¾—...",
            richDesc: "å­©å­å€‘éƒ½æ¥ç­äº†ï¼Œæˆ–è€…åœ¨åœ‹å¤–éå¾—å¾ˆå¥½ã€‚",
            poorDesc: "å­©å­é‚„åœ¨ç§Ÿæˆ¿å­ï¼Œç”šè‡³é‚„éœ€è¦ä½ æ‹¿é¤Šè€é‡‘è£œè²¼ã€‚",
            richOptions: [
                { text: "æˆç«‹å®¶æ—ä¿¡è¨—", result: { msg: "ç¢ºä¿è²¡å¯Œæ°¸çºŒå‚³æ‰¿ï¼Œå¯Œéä¸‰ä»£ã€‚", score: 30, money: 5000000 } },
                { text: "è³‡ç”¢è´ˆèˆ‡åˆ†é…", result: { msg: "åˆæ³•ç¯€ç¨…ï¼Œå­©å­å€‘éƒ½å¾ˆå­é †ã€‚", score: 20, money: 0 } },
                { text: "æŠ•è³‡å­«å­å‰µæ¥­", result: { msg: "å®¶æ—å‹¢åŠ›ç¹¼çºŒæ“´å¤§ã€‚", score: 25, money: 2000000 } }
            ],
            poorOptions: [
                { text: "å¹«å¿™å¸¶å­«å­", result: { msg: "è®“å­å¥³èƒ½å»åŠ ç­è³ºéŒ¢ï¼Œè€éª¨é ­å¿«æ•£äº†ã€‚", score: -10, money: 0 } },
                { text: "ç¨å±…ä¸æ‹–ç´¯", result: { msg: "å­¤ç¨æ­»çš„é«˜é¢¨éšªæ—ç¾¤ã€‚", score: -20, money: 0 } }
            ]
        },
        {
            age: 80, title: "æœ€çµ‚ç¯‡ç« ", description: "äººç”Ÿçš„çµ‚é»ã€‚", richDesc: "é¢¨å…‰å¤§è‘¬ï¼Œåç•™é’å²ã€‚", poorDesc: "å¡µæ­¸å¡µï¼ŒåœŸæ­¸åœŸã€‚",
            richOptions: [{ text: "çµæŸç²¾å½©ä¸€ç”Ÿ", specialType: "end" }],
            poorOptions: [{ text: "çµ‚æ–¼è§£è„«äº†", specialType: "end" }]
        }
    ];

    // --- HELPER FUNCTIONS ---

    function triggerAnimation(elementId, animationClass) {
        const el = document.getElementById(elementId);
        el.classList.remove(animationClass);
        void el.offsetWidth; // trigger reflow
        el.classList.add(animationClass);
    }

    function updateStatsUI(oldMoney, oldScore) {
        document.getElementById('stat-age').innerText = `${state.age} æ­²`;
        const moneyEl = document.getElementById('stat-money');
        const statusEl = document.getElementById('stat-status');

        moneyEl.innerText = `$${state.money.toLocaleString()}`;

        let statusText = "åº•å±¤";
        if (state.socialScore > 30) statusText = "ä¸­ç”¢";
        if (state.socialScore > 70) statusText = "å¯Œè±ª";
        if (state.socialScore > 90) statusText = "æ¬Šè²´";
        statusEl.innerText = statusText;

        if (state.money > oldMoney) triggerAnimation('stat-money', 'flash-green');
        if (state.money < oldMoney) triggerAnimation('stat-money', 'flash-red');
        if (state.socialScore > oldScore) triggerAnimation('stat-status', 'flash-green');
        if (state.socialScore < oldScore) triggerAnimation('stat-status', 'flash-red');
    }

    // --- NEW: MIDDLE CLASS TRIGGER ---
    function triggerMiddleEnding() {
        sound.init(); // Initialize audio
        sound.playTone('bad', false);

        document.getElementById('start-screen').classList.add('hidden');
        document.body.style.backgroundColor = "#2d3748"; 
        
        const endScreen = document.getElementById('end-screen');
        endScreen.classList.remove('hidden');
        triggerAnimation('end-screen', 'animate-in');

        const endMsg = document.getElementById('end-message');
        endMsg.innerHTML = `
            <h2 style="color:#a0aec0">çµå±€ï¼š404 Not Found</h2>
            <p>ç³»çµ±å˜—è©¦ç‚ºæ‚¨åŒ¹é…ä¸€å€‹æº«é¦¨çš„ã€Œä¸­ç”¢éšç´šã€å®¶åº­...</p>
            <p><strong>åŒ¹é…å¤±æ•—ã€‚</strong></p>
            <br>
            <p>é«˜æˆ¿åƒ¹åƒæ‰äº†æœªä¾†çš„æƒ³åƒã€‚</p>
            <p>é«˜é€šè†¨åå™¬äº†åƒ…å­˜çš„ç©è“„ã€‚</p>
            <p>é•·å·¥æ™‚å‰å¥ªäº†è‚²å…’çš„æ™‚é–“ã€‚</p>
            <br>
            <p style="font-size:1.3rem; border: 1px dashed #718096; padding:10px; border-radius:5px;">
                ç¶“éç†æ€§è¨ˆç®—ï¼Œ<br>
                ç¾ä»£çš„ä¸­ç”¢éšç´šï¼Œ<br>
                <strong>æ ¹æœ¬ä¸æ•¢ç”Ÿå°å­©ã€‚</strong>
            </p>
            <br>
            <p style="opacity:0.6; font-size: 0.9rem;">(æ­¤éšç´šæ­£åœ¨å¾ç¤¾æœƒçµæ§‹ä¸­å¿«é€Ÿæ¶ˆå¤±...)</p>
        `;
    }

    // --- CORE GAME FUNCTIONS ---

    function startGame(isRich) {
        sound.init(); // Init Audio Context
        sound.playTone('start', isRich); // Start SFX

        // Record Attempt
        if(isRich) globalStats.richPlay++;
        else globalStats.poorPlay++;
        saveStats();

        state.isRich = isRich;
        state.age = 5;
        state.history = [];
        state.money = isRich ? CONFIG.rich.startMoney : CONFIG.poor.startMoney;
        state.socialScore = isRich ? 80 : 10;

        document.body.className = isRich ? 'rich-theme' : 'poor-theme';
        
        document.getElementById('start-screen').classList.add('hidden');
        const gameScreen = document.getElementById('game-screen');
        gameScreen.classList.remove('hidden');
        triggerAnimation('game-screen', 'animate-in');
        
        updateStatsUI(state.money, state.socialScore);
        renderEvent();
    }

    function addToLog(msg, type = 'neutral') {
        const logBox = document.getElementById('game-log');
        const p = document.createElement('div');
        let prefix = state.isRich ? "âœ¨" : "â–ª";
        p.innerHTML = `<span style="opacity:0.6">[${state.age}æ­²]</span> ${prefix} ${msg}`;
        p.style.marginBottom = "8px";
        if(type === 'bad') p.style.color = state.isRich ? '#e53e3e' : '#d69e2e';
        if(type === 'good') p.style.color = state.isRich ? '#3182ce' : '#48bb78';
        logBox.insertBefore(p, logBox.firstChild);
    }

    function renderEvent() {
        const event = EVENTS.find(e => e.age === state.age);
        if (!event) return;

        const eventContainer = document.getElementById('event-container');
        const display = document.getElementById('event-display');
        const choices = document.getElementById('choices-display');
        
        triggerAnimation('event-container', 'animate-in');

        let html = `<h2>${event.title}</h2>`;
        html += `<p>${event.description}</p>`;
        html += `<div class="event-description-box">`;
        html += `<p><strong>ä½ çš„ç¾æ³ï¼š</strong>${state.isRich ? event.richDesc : event.poorDesc}</p>`;
        html += `</div>`;
        display.innerHTML = html;

        choices.innerHTML = '';
        
        // Select specific option set based on Class
        const activeOptions = state.isRich ? event.richOptions : event.poorOptions;

        activeOptions.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerText = opt.text;
            btn.setAttribute('data-text', opt.text);
            btn.onclick = () => handleChoice(event, opt); 
            choices.appendChild(btn);
        });
    }

    function handleChoice(event, opt) {
        sound.playTone('click', state.isRich); // Click SFX

        const oldMoney = state.money;
        const oldScore = state.socialScore;

        if (opt.specialType === "exam") handleExam(false);
        else if (opt.specialType === "exam_boost") handleExam(true);
        else if (opt.specialType === "end") { showEnding(); return; }
        else processResult(opt.result);

        // --- THE "BAILOUT" MECHANIC ---
        // If Rich and money < 0, instantly reset it.
        if (state.isRich && state.money < 0) {
            state.money = 1000000; 
            addToLog("âš ï¸ è­¦å‘Šï¼šè³‡é‡‘è½‰è² ã€‚å®¶æ—è¾¦å…¬å®¤å·²ç·Šæ€¥ä»‹å…¥ï¼Œå¡«è£œèµ¤å­—ä¸¦æ³¨å…¥å‚™ç”¨é‡‘ã€‚", "good");
            triggerAnimation('stat-money', 'flash-green');
            sound.playTone('good', true);
        }

        updateStatsUI(oldMoney, oldScore);

        let nextEventIndex = EVENTS.findIndex(e => e.age === state.age) + 1;
        if (nextEventIndex < EVENTS.length) {
            state.age = EVENTS[nextEventIndex].age;
            setTimeout(renderEvent, 400); // UI delay for better feel
        }
    }

    function handleExam(hasBoost) {
        let roll = Math.random();
        if (hasBoost) roll += 0.3; // Rich tutor boost

        let score = 0; let msg = ""; let type = "neutral";
        
        if (state.isRich) {
            if (roll < 0.85) { score = 100; msg = "å¤ªç°¡å–®äº†ï¼æ ¹æœ¬æ˜¯æ¯èªæ°´å¹³ã€‚"; type = "good"; }
            else if (roll < 0.98) { score = 60; msg = "éš¨ä¾¿å¯«å¯«åŠæ ¼å°±å¥½ã€‚"; }
            else { score = 30; msg = "ç¡éé ­äº†...è€å¸«èªªä¸‹æ¬¡è£œè€ƒæœƒè®“ä½ éã€‚"; type = "bad"; }
            state.socialScore += (score === 100 ? 10 : 0);
        } else {
            if (roll < 0.10) { score = 100; msg = "å¥‡è¹Ÿï¼æ­»èƒŒçš„å–®å­—éƒ½è€ƒå‡ºä¾†äº†ï¼"; type = "good"; }
            else if (roll < 0.50) { score = 60; msg = "ç›¡åŠ›äº†ï¼Œå‰›å¥½åŠæ ¼ã€‚"; }
            else { score = 30; msg = "è½åŠ›æ¸¬é©—åƒæ˜¯å¤–æ˜Ÿèªã€‚"; type = "bad"; }
            state.socialScore += (score === 100 ? 5 : -5);
        }
        
        if(type === 'good') sound.playTone('good', state.isRich);
        if(type === 'bad') sound.playTone('bad', state.isRich);
        
        addToLog(`è‹±æ–‡è€ƒè©¦çµæœï¼š${score}åˆ†ã€‚ ${msg}`, type);
    }

    function processResult(resultConfig) {
        let success = true;
        let msg = resultConfig.msg;
        let type = "neutral";

        if (resultConfig.chance !== undefined) {
            if (Math.random() > resultConfig.chance) {
                success = false; msg = resultConfig.fail; type = "bad";
            } else {
                msg = resultConfig.success; type = "good";
            }
        }

        if (resultConfig.score) state.socialScore += resultConfig.score;
        if (resultConfig.money) state.money += resultConfig.money;
        
        if (!resultConfig.chance) {
             if ((resultConfig.score > 0 || resultConfig.money > 0) && resultConfig.money > -50000) type = "good";
             if (resultConfig.score < 0 || resultConfig.money < -50000) type = "bad";
        }
        
        // Play Result Sound
        if (type === 'good') sound.playTone('good', state.isRich);
        if (type === 'bad') sound.playTone('bad', state.isRich);

        addToLog(msg, type);
    }

    function showEnding() {
        sound.playTone('start', state.isRich); // End tone

        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        
        gameScreen.style.opacity = 0;
        gameScreen.style.transform = 'translateY(-30px)';
        
        setTimeout(() => {
            gameScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            triggerAnimation('end-screen', 'animate-in');
            
            const endMsg = document.getElementById('end-message');
            let html = "";

            if (state.isRich) {
                // Record Rich Win (Basically always)
                globalStats.richWin++;
                saveStats();

                html += `<h2 style="color:#3182ce">çµå±€ï¼šæ—¢å¾—åˆ©ç›Šè€…</h2>`;
                html += `<p>ä½ çš„ä¸€ç”Ÿéƒ½åœ¨ã€Œé¸æ“‡ã€ä¸­åº¦éï¼Œè€Œä½ ç¸½æ˜¯æœ‰å¾ˆå¤šé¸æ“‡ã€‚</p><p>å³ä½¿çŠ¯éŒ¯ï¼Œå®¶æ—ä¹Ÿæœƒç‚ºä½ è²·å–®ã€‚</p><p><strong>ä½ çš„å­©å­å°‡ç¹¼çºŒç«™åœ¨é‡‘å­—å¡”é ‚ç«¯ï¼Œä¿¯ç°çœ¾ç”Ÿã€‚</strong></p>`;
            } else {
                // The "Legendary" Poor Ending check
                if (state.socialScore >= 60 && state.money > 1000000) {
                     globalStats.poorWin++;
                     saveStats();

                     html += `<h2 style="color:#48bb78">çµå±€ï¼šéšç´šç¿»è½‰ (å‚³èªªç´š)</h2>`;
                     html += `<p>ä½ å…‹æœäº†å¹¾ä¹ä¸å¯èƒ½çš„æ©Ÿç‡ï¼Œåœ¨ç„¡æ•¸æ¬¡é«˜é¢¨éšªçš„è³­å±€ä¸­å€–å­˜ã€‚</p><p>ä½ ä»˜å‡ºäº†å¥åº·çš„ä»£åƒ¹ï¼Œæ›ä¾†äº†ä¸‹ä¸€ä»£ç¨å¥½çš„èµ·é»ã€‚</p>`;
                } else {
                    // Standard Poor Ending (Loss)
                    html += `<h2 style="color:#d69e2e">çµå±€ï¼šè¤‡è£½è²¼ä¸Š</h2>`;
                    html += `<p>ä½ ç™¼ç¾äººç”Ÿå¤§éƒ¨åˆ†æ™‚å€™ï¼Œä½ æ ¹æœ¬<strong>æ²’æœ‰é¸æ“‡</strong>ã€‚</p><p>æ‰€è¬‚çš„é¸æ“‡ï¼Œåªæ˜¯åœ¨ã€Œç³Ÿç³•ã€èˆ‡ã€Œæ›´ç³Ÿç³•ã€ä¹‹é–“æ™æ‰ã€‚</p><p><strong>ä½ çš„å­©å­ï¼Œæ¥µå¤§æ©Ÿç‡å°‡é‡è¤‡ä½ é€™ç„¡åŠ›çš„ä¸€ç”Ÿ...</strong></p><p style="margin-top:20px; font-size:1.2rem; color: #e53e3e;">é€™å°±æ˜¯ç¾å¯¦çš„é‡é‡ã€‚</p>`;
                }
            }
            endMsg.innerHTML = html;

        }, 500);
    }
</script>
</body>
</html>
